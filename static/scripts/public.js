var message = { 
    "valid": {
        "qq": "properties.qq",
        "integerPrecision": "properties.integerPrecision",
        "compare": "properties.compare",
        "datetime": "properties.datetime",
        "maxlength": "请不要超过{0}个字符",
        "fractionPrecision": "properties.fractionPrecision",
        "series": "properties.series",
        "pattern": "properties.pattern",
        "cellphone": "properties.cellphone", 
        "bankcard": "properties.bankcard",
        "required": "该字段不能为空"
    },
    "common": {
        "daterange.LastWeek": "上周",
        "save.success": "保存成功!",
        "save.failed": "保存失败!",
        "online.message.error": "在线消息服务连接异常！",
        "daterange.Today": "今天",   
        "repeat.request.error": "请不要重复提交数据",
        "daterange.Last7Days": "最近7天",
        "daterange.ThisWeek": "本周",
        "daterange.Yesterday": "昨天",
        "daterange.TheDayBeforeYesterday": "前天",
        "daterange.ThisMonth": "本月",
        "daterange.LastMonth": "上月",
        "server.error": "服务忙,请重新操作!",
        "daterange.Last30Days": "最近30天",
        "OK": "确定"
    },
    "passport": {
        "authenticationFailure.AccountPasswordException": "账号或密码错误！",
        "authenticationFailure.CredentialExpiredException": "密码过期！",
        "authenticationFailure.AccountLockedException": "账号被冻结",
        "defense.register.disable.hours": "您注册的太频繁了，请于{0}小时后再来！",
        "authenticationFailure.InvalidLoginTimeException": "账号本时段被禁止登录！",
        "required.password": "请输入密码！",
        "notice.param.customer": "联系客服",
        "gameLogin.notGameLogin": "当前游戏已下架，去看看别的游戏吧！",
        "authenticationFailure.AccountDisabledException": "账号被停用",
        "authenticationFailure.InvalidLoginLocationException": "账号被禁止从当前地址登录！",
        "kick.out.manual.title": "强制踢出",
        "register.ip.restrict": "您所在的IP今天已经注册满员啦，明天再来吧！",
        "defense.register.disable.hours.24": "您所在的IP今天已经注册满员啦，请明天再来！",
        "freeznReason.title": "您的账户由于异常操作已被冻结，暂不支持登录！",
        "authenticationFailure.UNKNOWN": "登录失败！",
        "freeznReason.content": "您的登录密码输入错误次数超过上限，账户已被系统临时冻结，{0}解冻后将恢复正常登录。您也可以重置登录密码解冻。如有疑问，请{1}处理！",
        "required.username": "请输入账号！",
        "authenticationFailure.AccountNotFoundException": "账号或密码错误！",
        "authenticationFailure.AccountInActiveException": "账号审核中，稍后再试！",
        "kick.out.manual.content": "当前您的账号已由系统管理员强制下线。如有任何疑问，请及时联系在线客服。",
        "kick.out.auto.title": "重复登录",
        "authenticationFailure.captcha": "\"验证码不正确!\"",
        "authenticationFailure.remainTimes": "还可输入{0}次",
        "authenticationFailure.accountLockMaxTimes": "因于您的登录密码输入错误次数达到{0}次，账号已被系统临时冻结{1}小时!",
        "required.captcha": "请输入验证码！",
        "kick.out.auto.content": "当前您的账号在另一个地点登录，您已被迫下线，该地点IP为{0}。若这不是您本人操作，很可能您的密码已经泄露，建议您立即修改密码。如有任何疑问，请及时联系在线客服！"
    },
    "Register": {
        "constellation.notBlank": "星座不能为空",
        "username.exist": "用户名已经存在",
        "phone.format": "格式不正确，请输入纯数字",
        "realname.format": "请输入2-30个字符（由汉字、大小写英文字母、“·”组成）",
        "username.notBlank": "用户名不能为空",
        "captchaCode.notBlank": "验证码不能为空",
        "answer.notBlank": "回答不能为空",
        "weixin.notBlank": "请输入微信号",
        "username.format": "请输入4-15个字符（由英文字母，下划线“-”，数字或任意组合而成）",
        "weixin.format": "微信号格式不对，2-20个字符，类型不限",
        "permissionPwd.noBlank": "安全密码不能为空",
        "qq.notBlank": "请输入您的QQ账号",
        "termsOfService.notBlank": "请同意服务条款",
        "nickname.format": "请输入3-15个字符（由汉字、大小写英文字母和数字组成）",
        "email.format": "格式不正确，请输入有效的携带@符号的后缀",
        "region.notBlank": "省不能为空",
        "skype.notBlank": "请输入您的Skype账号",
        "password.notBlank": "登录密码不能为空",
        "sex.notBlank": "性别不能为空",
        "confirmPassword.notBlank": "确认登录密码不能为空",
        "email.notBlank": "请输入邮箱地址",
        "recomendUser.notBlank": "介绍人不能为空",
        "qq.format": "请输入5~11位0-9的纯数字",
        "msn.format": "格式不正确，请重新输入",
        "permissionPwd.format": "请选择6位0-9的纯数字",
        "defaultLocale.notBlank": "主语言不能为空",
        "recomendUser.format": "请输入正确的介绍人邀请码",
        "city.notBlank": "市不能为空",
        "realname.notBlank": "请输入真实姓名",
        "defaultTimezone.notBlank": "时区不能为空",
        "phone.notBlank": "请输入手机号码",
        "skype.format": "格式不正确，请重新输入",
        "password.format": "请输入6-20个字符（由大小写英文字母、数字和特殊符号组成）",
        "msn.notBlank": "请输入您的MSN账号",
        "country.notBlank": "国家不能为空",
        "confirmPassword.notEqWithPassword": "两次输入的不一致",
        "defaultCurrency.notBlank": "主货币不能为空",
        "confirmPermissionPwd.notEqWithPermissionPwd": "两次输入的不一致",
        "answer.format": "请输入1-30字符",
        "question.notBlank": "问题不能为空",
        "nickname.notBlank": "昵称不能为空",
        "captchaCode.notRight": "请输入正确的验证码",
        "confirmPermissionPwd.notBlank": "确认安全密码不能为空"
    },
    "log": {
        "passport.logout.desc.success": "退出成功!",
        "passport.login.desc.fail": "登录失败!",
        "passport.login.desc.success": "登录成功!"
    },
    "privilege": {
        "input.success": "输入正确！",
        "input.wrong": "密码错误，请重试！",
        "exist.user": "要删除角色存在关联用户，不能删除",
        "captcha.wrong": "您输入的验证码不正确，请重新输入!",
        "privilege.setpermissionPwd": "设置安全密码",
        "privilege.code.notblank": "请输入安全密码！",
        "title": "安全密码",
        "input.freeze": "密码输错已达上限被暂时冻结3小时，可重置密码后再操作",
        "permissionPwdNeConfirm": "两次输入的安全密码不一致",
        "captcha.input": "请输入验证码!",
        "privilege.valiCode.notblank": "请输入验证码！"
    },
    "subAccount": {
        "role.resourceIdNotNull": "请选择权限",
        "role.nameEmpty": "角色名称不能为空",
        "role.delete": "当前角色共有{x}个子账号正在使用，确认删除吗？",
        "edit.emailLen": "邮箱应该在128字符以内",
        "role.resource": "角色权限管理",
        "delete.confirmMessage": "确认删除该子账号吗？",
        "delete.confirmMessageUsing": "有子账号正在使用，确认删除吗？",
        "edit.question": "问题不能为空",
        "role.deleteConfirm": "确定删除该角色模板吗?",
        "role.rename": "角色名称:",
        "edit.confirmPasswordNE": "两次输入的登录密码不一致",
        "edit.email": "请填写正确的邮箱地址，以便接收信息。",
        "edit.usernameExist": "用户名已经存在",
        "edit.confirmPermissionPwdNe": "两次输入的安全密码不一致",
        "delete.confirmMessageBuiltin": "账号包含系统默认的重要角色，确认删除吗？",
        "edit.memoMax1000": "备注最长1000字符"
    },
    "notice": {
        "tmpl.content.BIND_EMAIL_VERIFICATION_CODE": "<p>亲爱的用户，您好：</p><p>   感谢您使用${sitename}！您正在进行邮箱验证，本次请求的验证码为：<strong>${verificationCode}</strong>。请将此验证码填入验证框内，以完成验证！</p><p>   本邮件为系统自动发出，请勿直接回复！如有疑问，请联系<a href=\"${customer}\" target=\"_blank\">在线客服</a>。</p><p> ${sitename}</p><p> ${year}年${month}月${day}日</p><p><br/></p>",
        "tmpl.title.BIND_EMAIL_VERIFICATION_CODE": "${sitename}验证码"
    },
    "setting": {
        "notice.param.customer": "联系客服"
    }
}
function beforeSend(){
    var checkLogin = Backbone.Model.extend()
    var newcheckLogin = new checkLogin;
    newcheckLogin.fetch({
        url:RootUrl+"/?d=api&c=user&m=checklogin",
        error:function(){
            console.log("获取用户状态失败")
        },
        success:function(model,xhr){
            if(xhr.status==0){
                $(".success").show();
                $(".mask").show();
                clearCookie("ci_session")
                $(".success").find("dt").addClass("failed")
                $(".success").find("dd").html(xhr.data.msg)
                $(".success").find("a").addClass("checkbtn").removeClass("loginsure")
                $(".checkbtn").on("click",function(){
                    goHome()
                })
                return false;
            }

        }
    })
}
//去首页
function goHome(){
    window.location.href=indexUrl   //线上
// 
    // window.location.href=indexUrl+views   //本机
}


// $(".close").on("click",function(){
//     reload()
// })
function reload(){
    window.location.reload()
}
function clearVal(){
    $("input").val("")
    $("error").html("")
}

var Sys = {};
var ua = navigator.userAgent.toLowerCase();
var s;
(s = ua.match(/rv:([\d.]+)\) like gecko/)) ? Sys.ie = s[1] :
(s = ua.match(/msie ([\d.]+)/)) ? Sys.ie = s[1] :
(s = ua.match(/firefox\/([\d.]+)/)) ? Sys.firefox = s[1] :
(s = ua.match(/chrome\/([\d.]+)/)) ? Sys.chrome = s[1] :
(s = ua.match(/opera.([\d.]+)/)) ? Sys.opera = s[1] :
(s = ua.match(/version\/([\d.]+).*safari/)) ? Sys.safari = s[1] : 0;
// if (Sys.ie) $('span').text('IE: ' + Sys.ie);
// if (Sys.firefox) $('span').text('Firefox: ' + Sys.firefox);
// if (Sys.chrome) $('span').text('Chrome: ' + Sys.chrome);
// if (Sys.opera) $('span').text('Opera: ' + Sys.opera);
// if (Sys.safari) $('span').text('Safari: ' + Sys.safari);

if(Sys.ie){
    if(Sys.ie<11){
        window.location.href=views+"browser.html"
    }
}
var onOff = false;
$(".right_qq").click(function(){
    $(".phoneBox").html("")
    $(".phoneBox").animate({
        width:0,
        left:0,
        opacity:0
    })
    if(onOff==false){
        $(".qqBox").html("876731458")
        $(".qqBox").animate({
            width:"187px",
            left:"-130px"
        })
        onOff =true;
        return false;
    }else{
        $(".qqBox").html("")
        $(".qqBox").animate({
            width:0,
            left:0
        }) 
        onOff=false
        return false;
    }
})

var qqOnoff = false;
$(".right_phone").click(function(){
    $(".qqBox").html("")
    $(".qqBox").animate({
        width:0,
        left:0
    }) 
    if(qqOnoff==false){
        $(".phoneBox").html("+6309150765566")
        $(".phoneBox").animate({
            width:"187px",
            left:"-130px",
            opacity:1
        })
        qqOnoff = true;
        return false;
    }else{
        qqOnoff=true
        $(".phoneBox").html("")
        $(".phoneBox").animate({
            width:0,
            left:0,
            opacity:0
        })
        qqOnoff = false;
        return false;
    }
})

function loading(){
    $(".loadingGif").show();
    $(".mask").show();
}
function loaded(){
    $(".loadingGif").hide();
    $(".mask").hide();
}
$(function() {
    initMenuEvents();
});
//银行卡输入自动添加空格
function formatAcc(obj) {
        var str = obj.value.replace(/\s/g,"");
        // 格式不符合，不处理
        if(isNaN(str))
        {
            return ;
        }
        var maxlen = 20;
        if (str.length < maxlen) {
            maxlen = str.length;
        }
        var temp = "";
        for (var i = 0; i < maxlen; i++) {
            temp = temp + str.substring(i, i + 1);
            if (i != 0 && (i + 1) % 4 == 0 && i != (str.length - 1)) {
                temp = temp + " ";
            }
        }
        obj.value = $.trim(temp);
    }

 //验证银行卡号   
var check = function(content) {  
    var regex = /^(998801|998802|622525|622526|435744|435745|483536|528020|526855|622156|622155|356869|531659|622157|627066|627067|627068|627069)\d{10}$/;  
    if (regex.test(content)) {  
        return true;  
    }  
    return false;  
}  
//将时间戳格式化成小时:分钟:秒的格式
var formatTime = function (unixTimestamp, type)
{
    var dt = new Date(unixTimestamp * 1000);

    var year = dt.getFullYear();
    var month = dt.getMonth() + 1;
    var day = dt.getDate();
    var hours = dt.getHours();
    var minutes = dt.getMinutes();
    var seconds = dt.getSeconds();

    if (hours < 10)
        hours = '0' + hours;

    if (minutes < 10)
        minutes = '0' + minutes;

    if (seconds < 10)
        seconds = '0' + seconds;
    if (type == 1)
    {
        return hours + ":" + minutes + ":" + seconds;
    } else if (type == 2)
    {
        return year + "/" + month + "/" + day + " " + hours + ":" + minutes + ":" + seconds;
    }
};

function Trim(str,is_global){
    var result;
    result = str.replace(/(^\s+)|(\s+$)/g,"");
    if(is_global.toLowerCase()=="g")
    {
        result = result.replace(/\s/g,"");
     }
    return result;
}
//验证邮箱是否合法
// function validateEmail(email){
//     var isemail=/^\w+([-\.]\w+)*@\w+([\.-]\w+)*\.\w{2,4}$/;
//     if(!email.match(isemail)){
        
//         return false;
//     }
//     return true;
// }

//校验银行卡格式是否合法
function luhmCheck(bankno) {
    var lastNum = bankno.substr(bankno.length - 1, 1);//取出最后一位（与luhm进行比较）

    var first15Num = bankno.substr(0, bankno.length - 1);//前15或18位
    var newArr = new Array();
    for (var i = first15Num.length - 1; i > -1; i--) {//前15或18位倒序存进数组
        newArr.push(first15Num.substr(i, 1));
    }
    var arrJiShu = new Array();  //奇数位*2的积 <9
    var arrJiShu2 = new Array(); //奇数位*2的积 >9

    var arrOuShu = new Array();  //偶数位数组
    for (var j = 0; j < newArr.length; j++) {
        if ((j + 1) % 2 == 1) {//奇数位
            if (parseInt(newArr[j]) * 2 < 9)
                arrJiShu.push(parseInt(newArr[j]) * 2);
            else
                arrJiShu2.push(parseInt(newArr[j]) * 2);
        }
        else //偶数位
            arrOuShu.push(newArr[j]);
    }

    var jishu_child1 = new Array();//奇数位*2 >9 的分割之后的数组个位数
    var jishu_child2 = new Array();//奇数位*2 >9 的分割之后的数组十位数
    for (var h = 0; h < arrJiShu2.length; h++) {
        jishu_child1.push(parseInt(arrJiShu2[h]) % 10);
        jishu_child2.push(parseInt(arrJiShu2[h]) / 10);
    }

    var sumJiShu = 0; //奇数位*2 < 9 的数组之和
    var sumOuShu = 0; //偶数位数组之和
    var sumJiShuChild1 = 0; //奇数位*2 >9 的分割之后的数组个位数之和
    var sumJiShuChild2 = 0; //奇数位*2 >9 的分割之后的数组十位数之和
    var sumTotal = 0;
    for (var m = 0; m < arrJiShu.length; m++) {
        sumJiShu = sumJiShu + parseInt(arrJiShu[m]);
    }

    for (var n = 0; n < arrOuShu.length; n++) {
        sumOuShu = sumOuShu + parseInt(arrOuShu[n]);
    }

    for (var p = 0; p < jishu_child1.length; p++) {
        sumJiShuChild1 = sumJiShuChild1 + parseInt(jishu_child1[p]);
        sumJiShuChild2 = sumJiShuChild2 + parseInt(jishu_child2[p]);
    }
    //计算总和
    sumTotal = parseInt(sumJiShu) + parseInt(sumOuShu) + parseInt(sumJiShuChild1) + parseInt(sumJiShuChild2);

    //计算Luhm值
    var k = parseInt(sumTotal) % 10 == 0 ? 10 : parseInt(sumTotal) % 10;
    var luhm = 10 - k;
    var my = false;
    if (lastNum == luhm) {//Luhm验证通过
        my = true;
    }
    else {//银行卡号必须符合Luhm校验
        my = false;
    }
    return my;
}
function createDesktop() {
    var sUrl = window.location.href;
    var sName = "UEDBET官网-西甲赫塔菲&皇家贝蒂斯体育合作伙伴快捷方式";
    try {
        var fso = new ActiveXObject("Scripting.FileSystemObject");
        var shell = new ActiveXObject("WScript.Shell");
        var folderPath = shell.SpecialFolders("Desktop");
        if (!fso.FolderExists(folderPath)) {
            fso.CreateFolder(folderPath);
        }
        if (!fso.FileExists(folderPath + "//" + sName + ".lnk")) {
            var shortLink = shell.CreateShortcut(folderPath + "//" + sName + ".lnk");
            shortLink.Description = "shortcut for " + sName;
            shortLink.TargetPath = sUrl;
            shortLink.WindowStyle = 3;
            shortLink.Save();
            alert('桌面快捷方式创建成功！');
        }
    } catch (e) {
        doSave("<script>location.href='" + sUrl + "'</sc" + "ript>", "text/html", sName + ".html");
    }
}
function doSave(value, type, name) {
    var blob;
    if (typeof window.Blob == "function") {
        blob = new Blob([value],{
            type: type
        });
    } else {
        var BlobBuilder = window.BlobBuilder || window.MozBlobBuilder || window.WebKitBlobBuilder || window.MSBlobBuilder;
        var bb = new BlobBuilder();
        bb.append(value);
        blob = bb.getBlob(type);
    }
    var URL = window.URL || window.webkitURL;
    var bloburl = URL.createObjectURL(blob);
    var anchor = document.createElement("a");
    if ('download' in anchor) {
        anchor.style.visibility = "hidden";
        anchor.href = bloburl;
        anchor.download = name;
        document.body.appendChild(anchor);
        var evt = document.createEvent("MouseEvents");
        evt.initEvent("click", true, true);
        anchor.dispatchEvent(evt);
        document.body.removeChild(anchor);
    } else if (navigator.msSaveBlob) {
        navigator.msSaveBlob(blob, name);
    } else {
        location.href = bloburl;
    }
}
function initMenuEvents() {
    var dataPage = window.location.pathname.split("/")[1] == "" ? "index.html" : window.location.pathname.split("/")[1];
    var currentNavSelector = '._vr_nav a[data-page="' + dataPage + '"]';
    var $currentNav = $(currentNavSelector).parent();
    $currentNav.siblings().removeClass("active");
    $currentNav.addClass("active");
    if (dataPage != 'agent.html') {
        jQuery("._vr_nav").slide({
            type: "menu",
            titCell: "li",
            targetCell: ".dropdown-menu",
            effect: "slideDown",
            delayTime: 300,
            triggerTime: 0,
            returnDefault: true
        });
    } else {
        jQuery(".slide").hover(function() {
            jQuery(this).find(".prev,.next").stop(true, true).fadeTo("show", 0.5)
        }, function() {
            jQuery(this).find(".prev,.next").fadeOut()
        });
        jQuery(".slide").slide({
            titCell: ".slide-indicators ul",
            mainCell: ".slide-inner ul",
            effect: "fold",
            autoPlay: true,
            interTime: 2500,
            autoPage: true,
            trigger: "click",
            startFun: function(i) {
                var curLi = jQuery(".slide .slide-inner li").eq(i);
                if (!!curLi.attr("data-src")) {
                    curLi.css("background-image", curLi.attr("data-src")).removeAttr("data-src")
                }
            }
        });
    }
    var mega = {};
    var $activeElement;
    $('[rel]').hover(function() {
        $activeElement = $activeElement != undefined ? $activeElement : $('.active[rel]');
        var _rel = $(this).attr('rel');
        clearTimeout(mega[_rel + '_timer']);
        mega[_rel + '_timer'] = setTimeout(function() {
            $('[rel]').each(function() {
                $(this)[_rel == $(this).attr('rel') ? 'addClass' : 'removeClass']('active');
            });
            $('#' + _rel).stop(true, true).slideDown("300");
        }, 150);
    }, function() {
        var _rel = $(this).attr('rel');
        clearTimeout(mega[_rel + '_timer']);
        mega[_rel + '_timer'] = setTimeout(function() {
            $('[rel]').removeClass('active');
            $activeElement.addClass('active');
            $('#' + _rel).stop(true, true).slideUp(300);
        }, 150);
    });
}
function SetHome(url) {
    if (url == "" || typeof url === "undefined") {
        url = "http://" + window.location.host;
    }
    try {
        document.body.style.behavior = 'url(#default#homepage)';
        document.body.setHomePage(url);
    } catch (e) {
        if (window.netscape) {
            try {
                netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
            } catch (e) {
                alert("抱歉，此操作被浏览器拒绝！\n\n您需要手动将【" + url + "】设置为首页。");
            }
        } else {
            alert("抱歉，您所使用的浏览器无法完成此操作。\n\n您需要手动将【" + url + "】设置为首页。");
        }
    }
}
function AddFavorite(url, title) {
    if (url == "" || typeof url === "undefined") {
        url = location.href;
    }
    if (title == "" || typeof title === "undefined") {
        title = document.title;
    }
    try {
        window.external.addFavorite(url, title);
    } 
    catch (e) {
        try {
            window.sidebar.addPanel(title, url, "");
        } 
        catch (e) {
            alert("抱歉，您所使用的浏览器无法完成此操作，请使用Ctrl+D进行添加");
        }
    }
}
function noticeDialog(target) {
    var _this = target;
    BootstrapDialog.show({
        title: '最新公告',
        message: function(dialog) {
            var $message = $('<div></div>');
            var pageToLoad = dialog.getData('pageToLoad');
            $message.load(pageToLoad);
            return $message;
        },
        type: BootstrapDialog.TYPE_WARNING,
        data: {
            'pageToLoad': ''
        },
        onshown: function(dialoge) {}
    });
}
function setCookie(c_name, value, expiredays) {
    var exdate = new Date();
    exdate.setMinutes(exdate.getMinutes() + expiredays);
    document.cookie = c_name + "=" + escape(value) + ";path=/" + 
    ((expiredays == null ) ? "" : ";expires=" + exdate.toGMTString())
}
function getCookie(c_name) {
    if (document.cookie.length > 0) {
        c_start = document.cookie.indexOf(c_name + "=");
        if (c_start != -1) {
            c_start = c_start + c_name.length + 1;
            c_end = document.cookie.indexOf(";", c_start);
            if (c_end == -1)
                c_end = document.cookie.length;
            return unescape(document.cookie.substring(c_start, c_end))
        }
    }
    return ""
}
function clearCookie(name) {  
    setCookie(name, "", -1); 
}


function alert(message) {
    BootstrapDialog.alert({
        message: message,
        title: '提示信息',
        type: BootstrapDialog.TYPE_WARNING
    });
}
function getlocationParam(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if (r != null )
        return r[2];
    return null ;
}

function dropdownOpen() {
    var $dropdownLi = $('._vr_loginSuccess .dropdown');
    $dropdownLi.mouseover(function() {
        $(this).addClass('open');
    }).mouseout(function() {
        $(this).removeClass('open');
    });
}

var baseUrl= "120"
// top 获取当前时间
setInterval(function(){
  var date = new Date(); //获取一个时间对象
  var year = Number(date.getFullYear());  // 获取完整的年份(4位,1970)
  var month = Number(date.getMonth()+1);  // 获取月份(0-11,0代表1月,用的时候记得加上1)
  var day = Number(date.getDate());  // 获取日(1-31)
  var hours = Number(date.getHours());  // 获取小时数(0-23)
  var minutes = Number(date.getMinutes());  // 获取分钟数(0-59)
  var seconds = Number(date.getSeconds());  // 获取秒数(0-59)
  function add0(num){
    if(num <10){
      return "0"+ num
    }else{
      return num
    }
  }
  if(hours<6||hours==6){
    $(".per_xinxi").find(".time").html("晚上好，")
    $(".wenhou").html("晚上好，")
  }else if((hours>6&&hours<12)||hours==12){
    $(".per_xinxi").find(".time").html("上午好，")
    $(".wenhou").html("上午好，")
  }else if((hours>12&&hours<13)||hours==13){
    $(".per_xinxi").find(".time").html("中午好，")
    $(".wenhou").html("中午好，")
  }else if((hours>13&&hours<19)||hours==19){
    $(".per_xinxi").find(".time").html("下午好，")
    $(".wenhou").html("下午好，")
  }else if((hours>19&&hours<24)||hours==24){
    $(".per_xinxi").find(".time").html("晚上好，")
    $(".wenhou").html("晚上好，")
  }
 $("._user_time").html( add0(year) + "-" + add0(month) + "-" + add0(day) +"  " + add0(hours) + ":" + add0(minutes) + ":" + add0(seconds))
},1000)
function getNotice(){
    var NoticeModel = Backbone.Model.extend()
    var NoticeCollection = Backbone.Collection.extend({
        model: NoticeModel,
        parse: function (resp, xhr) {
            return resp.data.noticelist;
        }
    });
    var NewnoticeCollection = new NoticeCollection;
    var NoticeView = Backbone.View.extend({
            el: $(".noticeList"),
            template: _.template($('#tpl').html()),
            events: {
                "click .noticeTit":function(events){
                    var obj=events.currentTarget;
                    BootstrapDialog.alert({
                        message:$(obj).attr("data-content"),
                        title: $(obj).html(),
                        type: BootstrapDialog.TYPE_WARNING
                    });
                    setTimeout(function(){
                        $(".bootstrap-dialog-title").find("a").css("color","#fff")
                        $(".bootstrap-dialog-message").css("text-align","left")
                    },300)
                    
                },
            },
            initialize: function () {
                var template = this.template;
                var el = this.el;
                var render = this.render();
                NewnoticeCollection.fetch({
                    url: RootUrl+"/?d=api&c=notice&m=getlist",
                    error:function(collection,xhr){
                        console.log("error")
                    },
                    success: function (collection, xhr) {
                        if (xhr.status != 1)
                        {
                           console.log(xhr.data.msg)
                        } else {
                            $(el).html(template({data:collection.models}));
                            $(".noticeList").html(template({data:collection.models}))
                            initCommonEvent();
                            function initCommonEvent() {
                                $('.notice-list>ul>li').css({'display':'inline-block'});
                                $('.notice-list').Marquee({
                                    isMarquee: true,
                                    isEqual: false,
                                    scrollDelay: 20,
                                    direction: 'left'
                                });
                            }
                            return this;
                        }
                    },
                    silent: true,
                });
            } 
    })
    var NewnoticeView = new NoticeView;
    // initCommonEvent();
}    
    function GetCountmail(){
        var UnreadWebmail = Backbone.Model.extend();
        var NewUnreadModel = new UnreadWebmail();
        NewUnreadModel.fetch({
            beforeSend:function(){
                beforeSend()
            },
            url: RootUrl+"/?d=api&c=webmail&m=countwebmailunread",
            error:function (model,xhr){
                console.log("头部未读站内信获取失败")
            },
            success:function (model,xhr){
                var count = xhr.data.count
                console.log(xhr.data)
                if(count!=0){
                    $("._vr_notice").html(count)
                    $(".xiaoxi").html(count).css("color","#f00")
                }else{
                    $("._vr_notice").hide() 
                    $(".xiaoxi").html(0)
                }
            }
        })
    }
    if(getCookie("ci_session")){
        GetCountmail()
    }

    $(".reminder").on("click",function(){
        $(".success").show();
        $(".success").find("dd").html("您的充值/提现申请已催客服加急办理，请耐心等待。")
        $(".mask").show();
    })
    $(".forgetNumber").on("click",function(){
        $(".accountNumber").show();
        $(".mask").show()
    })
